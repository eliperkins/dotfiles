#!/bin/bash
# Run by github/github codespaces after starting

# Always want to use ZSH as my default shell (e.g. for SSH)
sudo chsh "$(id -un)" --shell "/usr/bin/zsh"

# Install some developer tools and setup Linux how I like it
sudo apt-get update && sudo apt-get install -y \
  bat \
  fd-find \
  fzf \
  grc \
  neovim \
  ripgrep \
  shellcheck

# linux workaround for bat: https://github.com/sharkdp/bat?tab=readme-ov-file#on-ubuntu-using-apt
if [ ! -L ~/.local/bin/bat ] && [ -x "$(command -v batcat)" ]; then
  mkdir -p ~/.local/bin
  ln -s /usr/bin/batcat ~/.local/bin/bat
fi

# install nix if not installed
if [ ! -x "$(command -v nix)" ]; then
  sh <(curl -L https://nixos.org/nix/install) --no-daemon
  . ~/.nix-profile/etc/profile.d/nix.sh
fi

nix-env -iA nixpkgs.delta \
    nixpkgs.lsd \
    nixpkgs.zoxide
